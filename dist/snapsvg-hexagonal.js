"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(a){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.hexagonal=a()}})(function(){return function b(c,d,e){function a(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof require&&require;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var f=d[h]={exports:{}};c[h][0].call(f.exports,function(b){var d=c[h][1][b];return a(d?d:b)},f,f.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof require&&require,f=0;f<e.length;f++)a(e[f]);return a}({1:[function(a,b){"use strict";var c=Date.now;b.exports={debounce:function(a,b,d){var e,f,g,h,i,j=function(){var k=c()-h;k<b&&0<=k?e=setTimeout(j,b-k):(e=null,!d&&(i=a.apply(g,f),!e&&(g=f=null)))};return function(){g=this,f=arguments,h=c();var k=d&&!e;return e||(e=setTimeout(j,b)),k&&(i=a.apply(g,f),g=f=null),i}},isTouch:function(){return!!("ontouchstart"in window)||0<window.navigator.msMaxTouchPoints}}},{}],2:[function(a){"use strict";var b=a("./common"),c=b.debounce,d=b.isTouch;Snap.plugin(function(a,b,e){var f=Math.PI,g=Math.sin,h=Math.cos,i={style:"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;"},j=function(a){return a.preventDefault()},k=function(a){return{transform:"translateX("+a+")"}};e.prototype.hexagon=function(a,b,c){b=b||0,c=c||0;var d=a,e=f/6,i=d*g(e),j=d*h(e),k=[0,j,2*j,2*j,j,0],l=[i,0,i,i+d,2*i+d,i+d],m=k.map(function(a,d){return[k[d]+b,l[d]+c]});return this.polygon(m).addClass("hexagon")},e.prototype.hexabar=function(a){var b,c,e={fill:"#222",stroke:"#222",strokeWidth:"1px"},j={cursor:"pointer",fill:"#FFF",stroke:"#333"},k=a.sideLength,l=k/2,m=4,n=f/6,o=k*g(n),p=k*h(n),q=a.x||0,r=a.y||0,s=a.width,t=k+o,u=s-p,v=Math.ceil(s/2)+l,w=t/2+l/m;a.reverse?(b=[0,p+u,2*p+u,2*p+u,p+0,0],c=[0,0,o,o+k,o+k,0+k]):(b=[0,p+0,2*p+u,2*p+u,p+u,0],c=[o,0,0,0+k,o+k,o+k]);var x=this.text(q,r,a.title).addClass("menu-item-title").attr({x:"+="+v,y:"+="+w,fill:j.fill,fontSize:l,textAnchor:"middle"}),y=this.text(q,r,a.subtitle).addClass("menu-item-subtitle").attr({x:q+p,y:"+="+(w+l/2),fill:j.fill,fontSize:l*0.7,textAnchor:"middle",opacity:0}),z=b.map(function(a,d){return[b[d]+q,c[d]+r]}),A=this.polygon(z).attr(e),B=Object.assign(this.group(A,x,y),{bar:A,width:s,height:t,title:x,subTitle:y,hoverAnimationDisabled:!1});B.addClass("hexabar menu-item").attr(i),d()&&B.addClass("touch");var C=function(){if(B.hasClass("disabled")||B.hasClass("active")||B.focus(),!B.hoverAnimationDisabled&&0<y.attr("text").length){x.animate({fontSize:l*0.8,y:r+w-l/m},100),y.animate({opacity:1,x:q+v},100)}},D=function(){B.blur()};return B.enableHoverAnimation=function(){return B.hoverAnimationDisabled=!1,B.hover(C,D),B},B.disableHoverAnimation=function(){return B.hoverAnimationDisabled=!0,B.unhover(C,D),B},B.enable=function(){B.removeClass("active").removeClass("disabled").attr({opacity:1}).enableHoverAnimation().blur()},B.disable=function(){["bar","title","subTitle"].forEach(function(a){Object.assign(B[a].node.style,{cursor:"default"})}),B.addClass("disabled").attr({opacity:0.8}).disableHoverAnimation()},B.focus=function(){return Object.assign(B.bar.node.style,Object.assign({},e,j)),B.bar.node.style.cursor="pointer",B.title.node.style.cursor="pointer",B.title.node.style.fill=j.stroke,B.subTitle.node.style.cursor="pointer",B.subTitle.node.style.fill=j.stroke,B},B.blur=function(){return Object.assign(B.bar.node.style,e),B.title.node.style.fill="#FFF",!B.hoverAnimationDisabled&&0<y.attr("text").length&&(B.title.animate({fontSize:l,y:r+w},100),B.subTitle.animate({opacity:0,x:q+p},100)),B},B.enableHoverAnimation(),B},e.prototype.hexamenu=function(b,d){function e(a){return 0<a?a*(x+B*z)+(a-1)*C:-C}function i(){return u=b.map(function(a,c){var d=Array.isArray(b[c].submenu)&&0<b[c].submenu.length;return a.sideLength=x,a.width=y,a.x=0-F,a.y=C+c*(E+z+2*w),a.level=d?0:0,t.hexabar(a)}),u}function l(){s("before:reset",{menu:t}),u.forEach(function(b){0<b.submenu.length&&(b.submenu.forEach(function(a){a.remove()}),b.submenu=[]),b.isActive=!1;var c=t.visible?G:-G,d=t.visible?G:-G;a.animate(c,d,function(a){b.attr(k(a))},50,mina.linear,function(){b.enable(),o(b),b.index===u.length-1&&s("reset",{menu:t})})})}function m(c){t.visible||u.forEach(function(d,e){setTimeout(function(){a.animate(0,G,function(a){d.attr(k(a))},c,mina.easein,function(){e===b.length-1?(t.visible=!0,s("show",{menu:t})):0===e&&s("before:show",{menu:t})})},c/2*e)})}function n(c){var d=Object.assign(c,{isActive:!0,submenu:[]});d.addClass("active").disableHoverAnimation();var f=d.index,g=C+f*(E+z+2*w);b[d.index].submenu.forEach(function(a,b){d.submenu.push(t.hexabar({title:a.title,subtitle:a.subtitle,sideLength:x,width:y,x:G-D+0*w+0*D-2*z+G,y:g+e(b+1),level:0}).attr("opacity",0))});var h=50;d.submenu.forEach(function(c,e){c.index=e;var f={menu:t,parent:d,target:c},g="click:"+d.index+":",i=function(){s("click:child",f),s(g+"child",f),s(g+e,f)};setTimeout(function(){Object.assign(c.node,{oncontextmenu:j,onclick:i,ontouchstart:i}),c.attr("opacity",1),a.animate(0,-G,function(a){return c.attr(k(a))},h,mina.easein,function(){b[e].submenu&&e===b[e].submenu.length-1&&s("show:submenu",f)})},h*e)}),u.filter(function(a,b){return b!==d.index}).forEach(function(b){a.animate(G,F+z+w,function(a){return b.attr(k(a))},h,mina.linear,function(){b.disable(),p(b)})})}function o(a){a.node.onclick=H.bind(a),a.node.ontouchstart=H.bind(a),a.node.onmousedown=a.focus}function p(a){a.node.onclick=j,a.node.ontouchstart=j,a.node.onmousedown=j}function q(c){var d;u.slice(0).reverse().forEach(function(e,f){d=c+c/2*f,a.animate(G,0,function(a){e.attr(k(a))},d,mina.backout,function(){var a=t;f===b.length-1?(t.visible=!1,s("hide",{menu:a})):0===f&&s("before:hide",{menu:a})})})}function r(a){l.bind(t)(),q.bind(t)(a)}function s(a,b){var c;window.CustomEvent?c=new CustomEvent(a,{detail:b}):(c=document.createEvent("CustomEvent"),c.initCustomEvent(a,!0,!0,b)),t.node.dispatchEvent(c)}var t=this;t.visible=!1;var u=[],v=d.duration?d.duration:100,w=1,x=d.sideLength,y=d.width,z=4,A=f/6,B=1.4142135623730951,C=x*g(A),D=x*h(A),E=x+C,F=y+D+2*z+2*w,G=F+D+2*z,H=function(a){a.preventDefault();var b=u[this.index];s("click:"+b.index,{menu:t,parent:null,target:b}),b.isActive?l.bind(t)():b.hasSubmenu&&(b.blur(),n(b))};(function(){i().forEach(function(a,c){a.submenu=[],a.index=c,a.hasSubmenu=Array.isArray(b[c].submenu)&&0<b[c].submenu.length,a.node.onblur=j,a.node.oncontextmenu=j,o(a)})})();return{isVisible:function isVisible(){return t.visible},on:function on(a,b){return t.node.addEventListener(a,b)},off:function off(a,b){return t.node.removeEventListener(a,b)},buttons:u,toggle:c(function(){t.visible?r.bind(t)(v):m.bind(t)(v)},v*2.5,!0),reset:l}}})},{"./common":1}]},{},[2])(2)});
